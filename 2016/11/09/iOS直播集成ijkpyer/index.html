<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>iOS直播集成ijkpyer | qin.jie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="​         之前总结的是iOS直播中的各种直播协议。 接下来是直播中播放流程非常重要的一部分。集成 ijkplayer。 ijkplayer 是B站开源的基于FFmeng的一个视频直播的框架。支持安卓和iOS。 集成这个框架之后播放就显得很简单了。 其实ijkplayer gitHub主页也有集成教程。 网上也有很多。这里做一下记录。">
<meta name="keywords" content="iOS,直播">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS直播集成ijkpyer">
<meta property="og:url" content="http://yoursite.com/2016/11/09/iOS直播集成ijkpyer/index.html">
<meta property="og:site_name" content="qin.jie">
<meta property="og:description" content="​         之前总结的是iOS直播中的各种直播协议。 接下来是直播中播放流程非常重要的一部分。集成 ijkplayer。 ijkplayer 是B站开源的基于FFmeng的一个视频直播的框架。支持安卓和iOS。 集成这个框架之后播放就显得很简单了。 其实ijkplayer gitHub主页也有集成教程。 网上也有很多。这里做一下记录。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfkbv0d9oj30aq0x0goi.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfljvmf00j313c06ajti.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfx0s93c8j30xu0sial5.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/006tKfTcjw1fbg1cmys4wj30jm0oo41j.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tKfTcjw1fbg1gc2ycaj310k0pgaev.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/006tKfTcjw1fbg1lmgrttj31d20k2div.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tKfTcjw1fbg1pgd4a2j311a0ls77t.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tKfTcjw1fbg20qhmlmj30xi0o6aei.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tKfTcjw1fbg23ijcnxj31ik0tu0wz.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tKfTcjw1fbg2hrwgmrj30ec0mw764.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tKfTcjw1fbg2k1rth7j30u807uabd.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tKfTcjw1fbg35mafb7j31680emgog.jpg">
<meta property="og:updated_time" content="2017-08-17T07:31:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS直播集成ijkpyer">
<meta name="twitter:description" content="​         之前总结的是iOS直播中的各种直播协议。 接下来是直播中播放流程非常重要的一部分。集成 ijkplayer。 ijkplayer 是B站开源的基于FFmeng的一个视频直播的框架。支持安卓和iOS。 集成这个框架之后播放就显得很简单了。 其实ijkplayer gitHub主页也有集成教程。 网上也有很多。这里做一下记录。">
<meta name="twitter:image" content="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfkbv0d9oj30aq0x0goi.jpg">
  
    <link rel="alternate" href="/atom.xml" title="qin.jie" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">qin.jie</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-iOS直播集成ijkpyer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/09/iOS直播集成ijkpyer/" class="article-date">
  <time datetime="2016-11-09T13:13:03.000Z" itemprop="datePublished">2016-11-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      iOS直播集成ijkpyer
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>​        </p>
<p>之前总结的是iOS直播中的各种直播协议。 接下来是直播中播放流程非常重要的一部分。集成 <code>ijkplayer</code>。</p>
<p><a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="external">ijkplayer</a> 是B站开源的基于FFmeng的一个视频直播的框架。支持安卓和iOS。 集成这个框架之后播放就显得很简单了。</p>
<p>其实ijkplayer gitHub主页也有集成教程。 网上也有很多。这里做一下记录。</p>
<a id="more"></a>
<h3 id="1-下载-ijkplayer"><a href="#1-下载-ijkplayer" class="headerlink" title="1. 下载 ijkplayer"></a>1. 下载 ijkplayer</h3><p>ijkplayer 下载:</p>
<p><a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="external">https://github.com/Bilibili/ijkplayer</a></p>
<p>可以直接下载或者使用git命令 <code>git clone</code> 到本地</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/Bilibili/ijkplayer.git ijkplayer-ios</div></pre></td></tr></table></figure>
<p>下载解压后得到 :</p>
<p><img src="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfkbv0d9oj30aq0x0goi.jpg" alt="图片-w200"></p>
<p>-</p>
<h3 id="2-编译ijkplayer"><a href="#2-编译ijkplayer" class="headerlink" title="2. 编译ijkplayer"></a>2. 编译ijkplayer</h3><p>打开终端。 cd到下载的ijplayer文件夹</p>
<p>执行  <code>./init-ios.sh</code> 命令 。</p>
<p>开始下载ijkplayer。 这个编译过程中会先下载FFmeng。确保网络不会坑。否则就会</p>
<p><img src="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfljvmf00j313c06ajti.jpg" alt="下载ijkplayer"></p>
<p>好了。经过一天的下载。下载终于完成了。这🐌网速已经无力吐槽了。</p>
<p><img src="https://ww3.sinaimg.cn/large/006tKfTcjw1fbfx0s93c8j30xu0sial5.jpg" alt="下载成功提示"></p>
<p>接下来， cd 到 iOS 端目录 <code>cd ios</code></p>
<p>接着执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./compile-ffmpeg.sh clean</div><div class="line">./compile-ffmpeg.sh all</div></pre></td></tr></table></figure>
<p>编译FFmpeg。 编译过程会有点久。 耐心 。 ☕️</p>
<p>-</p>
<h3 id="3-打包IJKMediaFramework-framework框架”-3-打包IJKMediaFramework-framework框架"><a href="#3-打包IJKMediaFramework-framework框架”-3-打包IJKMediaFramework-framework框架" class="headerlink" title="3. 打包IJKMediaFramework.framework框架”)3. 打包IJKMediaFramework.framework框架"></a>3. 打包IJKMediaFramework.framework框架”)3. 打包IJKMediaFramework.framework框架</h3><p>终于到了最后一步了。  开始集成<code>ijkplayer</code>了。</p>
<p>这里有<strong>两种</strong>方法。  推荐第二种</p>
<h4 id="1-按照官方demo来。"><a href="#1-按照官方demo来。" class="headerlink" title="1.按照官方demo来。"></a>1.按照官方demo来。</h4><ul>
<li><p>打开你自己的工程。</p>
<p> <img src="https://ww1.sinaimg.cn/large/006tKfTcjw1fbg1cmys4wj30jm0oo41j.jpg" alt="w200"></p>
</li>
</ul>
<p>添加刚才编译过的ijkplayer工程</p>
<p><img src="https://ww4.sinaimg.cn/large/006tKfTcjw1fbg1gc2ycaj310k0pgaev.jpg" alt=""></p>
<ul>
<li><p>打开自己的工程设置 , 进入 Build Phases -&gt; Target Dependencies 。 添加IJKMediaFramework</p>
<p> <img src="https://ww1.sinaimg.cn/large/006tKfTcjw1fbg1lmgrttj31d20k2div.jpg" alt=""></p>
</li>
<li><p>进入Build Phases -&gt; Link Binary with Libraries 添加相关依赖框架</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">IJKMediaFramework.framework</div><div class="line">AudioToolbox.framework</div><div class="line">AVFoundation.framework</div><div class="line">CoreGraphics.framework</div><div class="line">CoreMedia.framework</div><div class="line">CoreVideo.framework</div><div class="line">libbz2.tbd</div><div class="line">libz.tbd</div><div class="line">MediaPlayer.framework</div><div class="line">MobileCoreServices.framework</div><div class="line">OpenGLES.framework</div><div class="line">QuartzCore.framework</div><div class="line">UIKit.framework</div><div class="line">VideoToolbox.framework</div></pre></td></tr></table></figure>
<p><img src="https://ww4.sinaimg.cn/large/006tKfTcjw1fbg1pgd4a2j311a0ls77t.jpg" alt=""></p>
</li>
<li><p>终了。 编译一下</p>
</li>
</ul>
<h4 id="2-将ijkplayer打包成framework导入工程中”-2-将ijkplayer打包成framework导入工程中"><a href="#2-将ijkplayer打包成framework导入工程中”-2-将ijkplayer打包成framework导入工程中" class="headerlink" title="2.将ijkplayer打包成framework导入工程中”)2.将ijkplayer打包成framework导入工程中"></a>2.将ijkplayer打包成framework导入工程中”)2.将ijkplayer打包成framework导入工程中</h4><ul>
<li><p>打开 <code>ijkplayer.xcodeproj</code></p>
<p> <img src="https://ww3.sinaimg.cn/large/006tKfTcjw1fbg20qhmlmj30xi0o6aei.jpg" alt="打开 ijkplayer工程"></p>
</li>
<li><p>打开之后选中工程当前的Scheme。然后编辑当前的Scheme.</p>
<p> <img src="https://ww3.sinaimg.cn/large/006tKfTcjw1fbg23ijcnxj31ik0tu0wz.jpg" alt="编辑Scheme"></p>
</li>
<li><p>设置好后分别选择模拟器和真机编译一次。</p>
</li>
<li><p>编译完成后进入Finder</p>
<p> <img src="https://ww4.sinaimg.cn/large/006tKfTcjw1fbg2hrwgmrj30ec0mw764.jpg" alt="w200"></p>
</li>
<li><p>可以看到真机环境和模拟器环境的framework<br><img src="https://ww2.sinaimg.cn/large/006tKfTcjw1fbg2k1rth7j30u807uabd.jpg" alt=""></p>
</li>
<li><p>接下来要做的就是合并真机和模拟器的framework</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lipo -create &quot;真机版本路径&quot; &quot;模拟器版本路径&quot; -output &quot;合并后的文件路径&quot;</div></pre></td></tr></table></figure>
<p> ​</p>
<p><strong>这里注意：</strong></p>
</li>
</ul>
<p>​    路径不是.framework文件。 而是里面的IJKMediaFramework文件</p>
<p>​    直接将该文件拖进终端就可以显示路径</p>
<pre><code>![](https://ww4.sinaimg.cn/large/006tKfTcjw1fbg2y27ysxj314c0ae761.jpg)
</code></pre><ul>
<li><p>进入真机环境的<code>IJKMediaFramework.framework</code>. 删掉IJKMediaFramework</p>
<p> <img src="https://ww2.sinaimg.cn/large/006tKfTcjw1fbg35mafb7j31680emgog.jpg" alt=""></p>
</li>
<li><p>把之前合并的Framework拖进<code>IJKMediaFramework.framework</code>。这就是我们需要的框架了。</p>
</li>
<li><p>导入<code>IJKMediaFramework.framework</code>及其依赖框架。</p>
</li>
<li><p>在ViewController中导入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#import &quot;IJKMediaFramework/IJKMediaFramework.h&quot;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>
<p>编译。没有错误则集成成功</p>
<h4 id="终了。"><a href="#终了。" class="headerlink" title="终了。"></a>终了。</h4><p><em>部分摘自:</em><br><a href="http://www.jianshu.com/p/1f06b27b3ac0" target="_blank" rel="external">简📖</a><br><a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="external">ijkplayer @gitHub</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2016/11/09/iOS直播集成ijkpyer/" data-id="cj6h7ost40006si9bzzv0elew" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/直播/">直播</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/01/19/Runtime 部分总结 /" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Runtime 部分总结
        
      </div>
    </a>
  
  
    <a href="/2016/10/17/直播各种协议概述/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">直播各种协议概述</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Runtime/">Runtime</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/直播/">直播</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/科学上网/">科学上网</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Runtime/" style="font-size: 10px;">Runtime</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/其他/" style="font-size: 10px;">其他</a> <a href="/tags/直播/" style="font-size: 15px;">直播</a> <a href="/tags/科学上网/" style="font-size: 10px;">科学上网</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/06/11/程序员必备技能之科学上网/">程序员必备技能之Google一下</a>
          </li>
        
          <li>
            <a href="/2017/01/19/Runtime 部分总结 /">Runtime 部分总结</a>
          </li>
        
          <li>
            <a href="/2016/11/09/iOS直播集成ijkpyer/">iOS直播集成ijkpyer</a>
          </li>
        
          <li>
            <a href="/2016/10/17/直播各种协议概述/">直播各种协议概述</a>
          </li>
        
          <li>
            <a href="/2016/07/10/First Blog/">First Blog</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 qin.jie<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>